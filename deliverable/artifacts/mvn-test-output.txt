[INFO] Scanning for projects...
[INFO] 
[INFO] ----------------< com.springboot:simple-springboot-app >----------------
[INFO] Building simple-springboot-app 0.0.1-SNAPSHOT
[INFO]   from pom.xml
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] --- resources:3.2.0:resources (default-resources) @ simple-springboot-app ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Using 'UTF-8' encoding to copy filtered properties files.
[INFO] Copying 2 resources
[INFO] Copying 0 resource
[INFO] 
[INFO] --- compiler:3.8.1:compile (default-compile) @ simple-springboot-app ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- resources:3.2.0:testResources (default-testResources) @ simple-springboot-app ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Using 'UTF-8' encoding to copy filtered properties files.
[INFO] skip non existing resourceDirectory C:\Users\workw\OneDrive\Desktop\sample-cart-offer\src\test\resources
[INFO] 
[INFO] --- compiler:3.8.1:testCompile (default-testCompile) @ simple-springboot-app ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- surefire:2.22.2:test (default-test) @ simple-springboot-app ---
[INFO] 
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running com.springboot.OfferIntegrationTests
01:43:37.120 [main] DEBUG org.springframework.test.context.BootstrapUtils - Instantiating CacheAwareContextLoaderDelegate from class [org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate]
01:43:37.153 [main] DEBUG org.springframework.test.context.BootstrapUtils - Instantiating BootstrapContext using constructor [public org.springframework.test.context.support.DefaultBootstrapContext(java.lang.Class,org.springframework.test.context.CacheAwareContextLoaderDelegate)]
01:43:37.228 [main] DEBUG org.springframework.test.context.BootstrapUtils - Instantiating TestContextBootstrapper for test class [com.springboot.OfferIntegrationTests] from class [org.springframework.boot.test.context.SpringBootTestContextBootstrapper]
01:43:37.243 [main] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found for test class [com.springboot.OfferIntegrationTests], using SpringBootContextLoader
01:43:37.254 [main] DEBUG org.springframework.test.context.support.AbstractContextLoader - Did not detect default resource location for test class [com.springboot.OfferIntegrationTests]: class path resource [com/springboot/OfferIntegrationTests-context.xml] does not exist
01:43:37.260 [main] DEBUG org.springframework.test.context.support.AbstractContextLoader - Did not detect default resource location for test class [com.springboot.OfferIntegrationTests]: class path resource [com/springboot/OfferIntegrationTestsContext.groovy] does not exist
01:43:37.260 [main] INFO org.springframework.test.context.support.AbstractContextLoader - Could not detect default resource locations for test class [com.springboot.OfferIntegrationTests]: no resource found for suffixes {-context.xml, Context.groovy}.
01:43:37.260 [main] INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.springboot.OfferIntegrationTests]: OfferIntegrationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
01:43:37.360 [main] DEBUG org.springframework.test.context.support.ActiveProfilesUtils - Could not find an 'annotation declaring class' for annotation type [org.springframework.test.context.ActiveProfiles] and class [com.springboot.OfferIntegrationTests]
01:43:37.510 [main] DEBUG org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider - Identified candidate component class: file [C:\Users\workw\OneDrive\Desktop\sample-cart-offer\target\classes\com\springboot\CartOfferApplication.class]
01:43:37.510 [main] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.springboot.CartOfferApplication for test class com.springboot.OfferIntegrationTests
01:43:37.769 [main] DEBUG org.springframework.boot.test.context.SpringBootTestContextBootstrapper - @TestExecutionListeners is not present for class [com.springboot.OfferIntegrationTests]: using defaults.
01:43:37.769 [main] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
01:43:37.798 [main] DEBUG org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Skipping candidate TestExecutionListener [org.springframework.test.context.transaction.TransactionalTestExecutionListener] due to a missing dependency. Specify custom listener classes or make the default listener classes and their required dependencies available. Offending class: [org/springframework/transaction/interceptor/TransactionAttributeSource]
01:43:37.798 [main] DEBUG org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Skipping candidate TestExecutionListener [org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener] due to a missing dependency. Specify custom listener classes or make the default listener classes and their required dependencies available. Offending class: [org/springframework/transaction/interceptor/TransactionAttribute]
01:43:37.802 [main] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@7393222f, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@babafc2, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@31add175, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@ae3540e, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@600b9d27, org.springframework.test.context.support.DirtiesContextTestExecutionListener@3688eb5b, org.springframework.test.context.event.EventPublishingTestExecutionListener@69f1a286, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@7922d892, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@457c9034, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@345f69f3, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@50de186c, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@3f57bcad, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@1e8b7643]
01:43:37.807 [main] DEBUG org.springframework.test.context.support.AbstractDirtiesContextTestExecutionListener - Before test class: context [DefaultTestContext@481ba2cf testClass = OfferIntegrationTests, testInstance = [null], testMethod = [null], testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@46b61c56 testClass = OfferIntegrationTests, locations = '{}', classes = '{class com.springboot.CartOfferApplication}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true, server.port=0}', contextCustomizers = set[org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@6babf3bf, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@24fcf36f, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@581ac8a8, org.springframework.boot.test.autoconfigure.actuate.metrics.MetricsExportContextCustomizerFactory$DisableMetricExportContextCustomizer@16a0ee18, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@3f6b0be5, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@eafc191], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> false]], class annotated with @DirtiesContext [false] with mode [null].
01:43:37.837 [main] DEBUG org.springframework.test.context.support.DependencyInjectionTestExecutionListener - Performing dependency injection for test context [[DefaultTestContext@481ba2cf testClass = OfferIntegrationTests, testInstance = com.springboot.OfferIntegrationTests@d41f816, testMethod = [null], testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@46b61c56 testClass = OfferIntegrationTests, locations = '{}', classes = '{class com.springboot.CartOfferApplication}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true, server.port=0}', contextCustomizers = set[org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@6babf3bf, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@24fcf36f, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@581ac8a8, org.springframework.boot.test.autoconfigure.actuate.metrics.MetricsExportContextCustomizerFactory$DisableMetricExportContextCustomizer@16a0ee18, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@3f6b0be5, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@eafc191], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> false, 'org.springframework.test.context.event.ApplicationEventsTestExecutionListener.recordApplicationEvents' -> false]]].

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::               (v2.6.14)

2025-11-30 01:43:38.710  INFO 1364 --- [           main] com.springboot.OfferIntegrationTests     : Starting OfferIntegrationTests using Java 19.0.2 on FloodyOp with PID 1364 (started by workw in C:\Users\workw\OneDrive\Desktop\sample-cart-offer)
2025-11-30 01:43:38.710  INFO 1364 --- [           main] com.springboot.OfferIntegrationTests     : The following 1 profile is active: "complex"
2025-11-30 01:43:41.045  INFO 1364 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2025-11-30 01:43:41.045  INFO 1364 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-30 01:43:41.045  INFO 1364 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.69]
2025-11-30 01:43:41.305  INFO 1364 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-30 01:43:41.305  INFO 1364 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2530 ms
2025-11-30 01:43:42.637  INFO 1364 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 61856 (http) with context path ''
2025-11-30 01:43:42.685  INFO 1364 --- [           main] com.springboot.OfferIntegrationTests     : Started OfferIntegrationTests in 4.795 seconds (JVM running for 7.118)
2025-11-30 01:43:43.546  INFO 1364 --- [o-auto-1-exec-3] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-30 01:43:43.546  INFO 1364 --- [o-auto-1-exec-3] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-30 01:43:43.548  INFO 1364 --- [o-auto-1-exec-3] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
OfferRequest(restaurant_id=102, offer_type=FLAT%, offer_value=10, customer_segment=[p2])
ApplyOfferRequest(cart_value=200, restaurant_id=102, user_id=1002)
got segment responseSegmentResponse(segment=p2)
got a match
OfferRequest(restaurant_id=110, offer_type=FLATX, offer_value=20, customer_segment=[p10])
ApplyOfferRequest(cart_value=200, restaurant_id=110, user_id=1010)
got segment responseSegmentResponse(segment=p10)
got a match
OfferRequest(restaurant_id=110, offer_type=FLATX, offer_value=5, customer_segment=[p10])
ApplyOfferRequest(cart_value=200, restaurant_id=110, user_id=1010)
got segment responseSegmentResponse(segment=p10)
got a match
OfferRequest(restaurant_id=106, offer_type=FLATX, offer_value=0, customer_segment=[p6])
ApplyOfferRequest(cart_value=120, restaurant_id=106, user_id=1006)
got segment responseSegmentResponse(segment=p6)
got a match
OfferRequest(restaurant_id=109, offer_type=FLAT%, offer_value=33, customer_segment=[p9])
ApplyOfferRequest(cart_value=199, restaurant_id=109, user_id=1009)
got segment responseSegmentResponse(segment=p9)
got a match
OfferRequest(restaurant_id=103, offer_type=FLATX, offer_value=50, customer_segment=[pX])
ApplyOfferRequest(cart_value=500, restaurant_id=103, user_id=1003)
java.io.FileNotFoundException: http://localhost:1080/api/v1/user_segment?user_id=1003
OfferRequest(restaurant_id=107, offer_type=INVALID_TYPE, offer_value=10, customer_segment=[pX])
ApplyOfferRequest(cart_value=100, restaurant_id=107, user_id=1007)
got segment responseSegmentResponse(segment=pX)
got a match
OfferRequest(restaurant_id=108, offer_type=FLAT%, offer_value=100, customer_segment=[p8])
ApplyOfferRequest(cart_value=250, restaurant_id=108, user_id=1008)
got segment responseSegmentResponse(segment=p8)
got a match
OfferRequest(restaurant_id=105, offer_type=FLATX, offer_value=30, customer_segment=[p5])
OfferRequest(restaurant_id=105, offer_type=FLAT%, offer_value=25, customer_segment=[p5])
ApplyOfferRequest(cart_value=200, restaurant_id=105, user_id=1005)
got segment responseSegmentResponse(segment=p5)
got a match
OfferRequest(restaurant_id=101, offer_type=FLATX, offer_value=10, customer_segment=[p1])
ApplyOfferRequest(cart_value=200, restaurant_id=101, user_id=1001)
got segment responseSegmentResponse(segment=p1)
got a match
OfferRequest(restaurant_id=104, offer_type=FLATX, offer_value=25, customer_segment=[p2])
ApplyOfferRequest(cart_value=300, restaurant_id=104, user_id=1004)
got segment responseSegmentResponse(segment=p1)
[INFO] Tests run: 10, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 7.573 s - in com.springboot.OfferIntegrationTests
[INFO] 
[INFO] Results:
[INFO] 
[INFO] Tests run: 10, Failures: 0, Errors: 0, Skipped: 0
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  14.597 s
[INFO] Finished at: 2025-11-30T01:43:45+05:30
[INFO] ------------------------------------------------------------------------
